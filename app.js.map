{"version":3,"sources":["src/app.js"],"names":[],"mappings":"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","file":"src/app.js","sourcesContent":["import feedFactory from 'feedFactory.js';\n\nlet\n  collectedEntries,\n  createOutputTag,\n  fetchCountDownLatch,\n  fetchFeed,\n  main,\n  outputElement,\n  printFeedEntries\n  ;\n\ncollectedEntries = [];\nfetchCountDownLatch = 0;\noutputElement = document.getElementById('output');\n\ncreateOutputTag = (feedTitle, entryTitle, link, dateTime) => {\n  let\n    col1,\n    col2,\n    col2Content,\n    col3,\n    result\n    ;\n\n  col1 = document.createElement('td');\n  col1.textContent = feedTitle;\n\n  col2 = document.createElement('td');\n  col2Content = document.createElement('a');\n  col2Content.href = link;\n  col2Content.appendChild(document.createTextNode(entryTitle));\n  col2.appendChild(col2Content);\n\n  col3 = document.createElement('td');\n  col3.textContent = dateTime.toLocaleString();\n\n  result = document.createElement('tr');\n  result.appendChild(col1);\n  result.appendChild(col2);\n  result.appendChild(col3);\n\n  return result;\n};\n\nfetchFeed = url => {\n  console.time(url);\n  fetchCountDownLatch++;\n  feedFactory(url).then(data => {\n    console.timeEnd(url);\n    console.log('Received %i entries for %s', data.entries.length, url);\n    collectedEntries = collectedEntries.concat(data.entries);\n    fetchCountDownLatch--;\n    if (fetchCountDownLatch === 0) {\n      printFeedEntries();\n    }\n  }).catch(reason => {\n    console.timeEnd(url);\n    console.error('Could not load %s; reason: %s, %o', url, reason.message, reason.data);\n    fetchCountDownLatch--;\n    if (fetchCountDownLatch === 0) {\n      printFeedEntries();\n    }\n  });\n};\n\nprintFeedEntries = () => {\n  console.log('Sorting %i entries', collectedEntries.length);\n  collectedEntries.sort((val1, val2) => {\n    return val2.dateTime - val1.dateTime;\n  });\n  console.log('Printing entries');\n  collectedEntries.forEach(feedEntry => {\n    outputElement.appendChild(createOutputTag(\n      feedEntry.feedTitle,\n      feedEntry.title,\n      feedEntry.link,\n      feedEntry.dateTime\n    ));\n  });\n};\n\nmain = () => {\n  let\n    queryObject,\n    queryString\n    ;\n\n  queryString = window.location.search.slice(1);\n  if (!queryString) {\n    console.log('No query provided');\n    return;\n  }\n\n  queryObject = JSON.parse(window.decodeURIComponent(queryString));\n  console.log('Query object: %o', queryObject);\n  queryObject.feeds.forEach(fetchFeed);\n};\n\nmain();\n\n// myDefaultFeeds = {\n//  \"feeds\": [\n//    \"http://rss.golem.de/rss.php?feed=ATOM1.0\",\n//    \"http://ticker.gulli.com/rss\",\n//    \"http://www.bbc.co.uk/blogs/doctorwho/atom\",\n//    \"http://www.heise.de/developer/rss/news-atom.xml\",\n//    \"http://www.heise.de/netze/rss/netze-atom.xml\",\n//    \"http://www.heise.de/newsticker/heise-atom.xml\",\n//    \"http://www.heise.de/open/news/news-atom.xml\",\n//    \"http://www.heise.de/security/news/news-atom.xml\",\n//    \"http://www.pro-linux.de/rss/1/4/atom_alles.xml\",\n//    \"https://mailbox.org/feed/\",\n//    \"https://www.archlinux.org/feeds/news/\",\n//    \"https://www.tagesschau.de/xml/rss2\"\n//  ]\n// }\n"]}