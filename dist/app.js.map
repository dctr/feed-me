{"version":3,"sources":["src/app.js"],"names":[],"mappings":"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","file":"src/app.js","sourcesContent":["import feedFactory from 'feedFactory.js';\n\nlet countDownLatch,\n  feeds,\n  fetchFeed,\n  newOutputTag,\n  outputArea,\n  printFeeds,\n  queryObject;\n\ncountDownLatch = 0;\nfeeds = [];\noutputArea = document.getElementById('output');\n\nfetchFeed = url => {\n  countDownLatch++;\n  console.log('Fetching: ' + url);\n  feedFactory(url).then(data => {\n    feeds = feeds.concat(data.entries);\n    console.log(feeds.length + ' -- ' + countDownLatch);\n    countDownLatch--;\n    if (countDownLatch === 0) {\n      printFeeds(feeds);\n    }\n  }).catch(reason => {\n    console.log('Could not load ' + url);\n    console.log(reason);\n    countDownLatch--;\n    if (countDownLatch === 0) {\n      printFeeds(feeds);\n    }\n  });\n};\n\nnewOutputTag = (feedTitle, title, link, dateTime) => {\n  let col1,\n    col2,\n    col2Content,\n    col3,\n    result;\n\n  col1 = document.createElement('td');\n  col1.innerHTML = feedTitle;\n  col2 = document.createElement('td');\n  col2Content = document.createElement('a');\n  col2Content.title = title;\n  col2Content.href = link;\n  col2Content.appendChild(document.createTextNode(title));\n  col2.appendChild(col2Content);\n  col3 = document.createElement('td');\n  col3.innerHTML = dateTime.toLocaleString();\n  result = document.createElement('tr');\n  result.appendChild(col1);\n  result.appendChild(col2);\n  result.appendChild(col3);\n  return result;\n};\n\nprintFeeds = feedArray => {\n  console.log('Sorting entries: ' + feeds.length);\n  feeds.sort(\n    (val1, val2) => {\n      return val2.dateTime - val1.dateTime;\n    }\n  );\n  console.log('Printing entries: ' + feedArray.length);\n  feedArray.forEach(feed => {\n    outputArea.appendChild(\n      newOutputTag(\n        feed.feedTitle,\n        feed.title,\n        feed.link,\n        feed.dateTime\n      )\n    );\n  });\n};\n\nqueryObject = JSON.parse(window.decodeURIComponent(window.location.search.slice(1)));\n\n//{\n//  \"feeds\": [\n//    \"http://rss.golem.de/rss.php?feed=ATOM1.0\",\n//    \"http://ticker.gulli.com/rss\",\n//    \"http://www.bbc.co.uk/blogs/doctorwho/atom\",\n//    \"http://www.heise.de/developer/rss/news-atom.xml\",\n//    \"http://www.heise.de/netze/rss/netze-atom.xml\",\n//    \"http://www.heise.de/newsticker/heise-atom.xml\",\n//    \"http://www.heise.de/open/news/news-atom.xml\",\n//    \"http://www.heise.de/security/news/news-atom.xml\",\n//    \"http://www.pro-linux.de/rss/1/4/atom_alles.xml\",\n//    \"https://mailbox.org/feed/\",\n//    \"https://www.archlinux.org/feeds/news/\",\n//    \"https://www.tagesschau.de/xml/rss2\"\n//  ]\n//}\n\nconsole.log(queryObject);\n\nqueryObject.feeds.forEach(fetchFeed);\n"]}